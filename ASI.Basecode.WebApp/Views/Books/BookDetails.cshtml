@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@model ASI.Basecode.Services.ServiceModels.BookViewModel;
@{
    ViewData["Title"] = "BookDetails";
    Layout = "_AdminSidebarLayout";
}

<div class="book-details-container">
    @if (Model != null)
    {
        <div class="book-cover-section" style="margin-top:200px; margin-left:400px;">
            <h1 class="book-title">@Html.DisplayFor(model => model.Title)</h1>

                <h2 class="book-subtitle">@Html.DisplayFor(model => model.Subtitle)</h2>
            


                <img src="@Model.CoverImageUrl" alt="Book Cover" class="book-cover" style="height:200px; width:200px;"/>



                <div style="margin-top: 15px;">
                    <a href="@Model.BookFileUrl" target="_blank" class="detail-value">View Book File</a>
                </div>
            
        </div>

        <div class="book-info-section" style="margin-left:400px;">
            <div class="detail-group">
                <span class="detail-label">Book ID:</span>
                <span class="detail-value">@Html.DisplayFor(model => model.BookId)</span>
            </div>

            <div class="detail-group">
                <span class="detail-label">Author:</span>
                <span class="detail-value">@Html.DisplayFor(model => model.Author)</span>
            </div>

            <div class="detail-group">
                <span class="detail-label">Description:</span>
                <div class="description-box">
                    @Html.DisplayFor(model => model.Description)
                </div>
            </div>

            <div class="detail-group">
                <span class="detail-label">Publication Date:</span>
                <span class="detail-value">@Model.PublicationDate</span>
            </div>

            <div class="detail-group">
                <span class="detail-label">Publisher:</span>
                <span class="detail-value">@Html.DisplayFor(model => model.Publisher)</span>
            </div>

            <div class="detail-group">
                <span class="detail-label">Publication Location:</span>
                <span class="detail-value">@Html.DisplayFor(model => model.PublicationLocation)</span>
            </div>

            <div class="detail-group">
                <span class="detail-label">Number of Pages:</span>
                <span class="detail-value">@Html.DisplayFor(model => model.NumberOfPages)</span>
            </div>

            <div class="detail-group">
                <span class="detail-label">Language:</span>
                <span class="detail-value">@Html.DisplayFor(model => model.Language)</span>
            </div>

            <div class="detail-group">
                <span class="detail-label">ISBN-10:</span>
                <span class="detail-value">@Html.DisplayFor(model => model.ISBN10)</span>
            </div>

            <div class="detail-group">
                <span class="detail-label">ISBN-13:</span>
                <span class="detail-value">@Html.DisplayFor(model => model.ISBN13)</span>
            </div>

            <div class="detail-group">
                <span class="detail-label">Edition:</span>
                <span class="detail-value">@Html.DisplayFor(model => model.Edition)</span>
            </div>

           
                <div class="detail-group">
                    <span class="detail-label">Series Name:</span>
                    <span class="detail-value">@Html.DisplayFor(model => model.SeriesName)</span>
                </div>
                <div class="detail-group">
                    <span class="detail-label">Series Order:</span>
                    <span class="detail-value">@Html.DisplayFor(model => model.SeriesOrder)</span>
                </div>

                    <div class="detail-group">
                        <span class="detail-label">Series Description:</span>
                        <div class="description-box">
                            @Html.DisplayFor(model => model.SeriesDescription)
                        </div>
                    </div>


            <div class="detail-group">
                <span class="detail-label">Average Rating:</span>
                <span class="detail-value">@Model.AverageRating?.ToString("0.0") / 5.0</span>
            </div>

            <div class="detail-group">
                <span class="detail-label">Likes:</span>
                <span class="detail-value">@Html.DisplayFor(model => model.Likes)</span>
            </div>

            <div class="detail-group">
                <span class="detail-label">Upload Date:</span>
                <span class="detail-value">@Model.UploadDate</span>
            </div>

            <div class="detail-group">
                <span class="detail-label">Last Updated:</span>
                <span class="detail-value">@Model.UpdatedDate?.ToString("MMMM dd, yyyy hh:mm tt")</span>
            </div>

            <div class="detail-group">
                <span class="detail-label">Admin ID (Uploader):</span>
                <span class="detail-value">@Html.DisplayFor(model => model.AdminId)</span>
            </div>

            
                <div class="detail-group">
                    <span class="detail-label">Updated By Admin ID:</span>
                    <span class="detail-value">@Html.DisplayFor(model => model.UpdatedByAdminId)</span>
                </div>
            <div class="book-reviews-section" style="margin-left: 400px; margin-top: 50px;">
    <h3>Reviews</h3>
    @if (!Model.HasReviewed && User.Identity.IsAuthenticated)
    {
        <div class="mt-4">
          <a class="btn btn-primary"
             asp-controller="Review"
             asp-action="Add"
             asp-route-bookId="@Model.BookId">
            Leave a Review
          </a>
        </div>
    }

    @if (Model.Reviews != null && Model.Reviews.Any())
    {
        @foreach (var review in Model.Reviews)
        {
            <div class="review-box border p-3 mb-3 rounded bg-light">
                <div><strong>Reviewer:</strong> @review.UserId</div>
                <div><strong>Rating:</strong> @review.Rating / 5</div>
                <div><strong>Comments:</strong></div>
                <div class="review-comments">@review.Comment</div>
                <div class="text-muted small">Posted on: @review.UploadDate</div>
            </div>
        }
    }
    else
    {
        <p class="text-muted">No reviews available for this book.</p>
    }
</div>

        </div>

    }
    else
    {
        <p>Book details could not be loaded. Please ensure a valid Book ID was provided.</p>
    }
</div>

@section scripts {
    <script>
        // Any specific JavaScript for this details page can go here.
    </script>
}

